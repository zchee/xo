---
# Generated by xo.
schemas:
- type: mysql
  name: booktest
  enums:
  - table_name: books
    name: book_type
    values:
    - name: FICTION
      const_value: 1
    - name: NONFICTION
      const_value: 2
  procs:
  - type: function
    name: say_hello
    params:
    - name: name
      datatype:
        type: varchar
        prec: 255
    return:
    - name: r0
      datatype:
        type: varchar
        prec: 255
    definition: |-
      BEGIN
        RETURN CONCAT('hello ', name);
      END
  tables:
  - type: table
    name: authors
    columns:
    - name: author_id
      datatype:
        type: int
        prec: 11
      is_primary: true
      is_sequence: true
    - name: name
      datatype:
        type: varchar
        prec: 255
      default: "''"
    primary_keys:
    - name: author_id
      datatype:
        type: int
        prec: 11
      is_primary: true
      is_sequence: true
    indexes:
    - name: authors_name_idx
      fields:
      - name: name
        datatype:
          type: varchar
          prec: 255
        default: "''"
    - name: authors_author_id_pkey
      fields:
      - name: author_id
        datatype:
          type: int
          prec: 11
        is_primary: true
        is_sequence: true
      is_unique: true
      is_primary: true
  - type: table
    name: books
    columns:
    - name: book_id
      datatype:
        type: int
        prec: 11
      is_primary: true
      is_sequence: true
    - name: author_id
      datatype:
        type: int
        prec: 11
    - name: isbn
      datatype:
        type: varchar
        prec: 255
      default: "''"
    - name: book_type
      datatype:
        type: book_type
      default: "'FICTION'"
      is_enum: true
    - name: title
      datatype:
        type: varchar
        prec: 255
      default: "''"
    - name: year
      datatype:
        type: int
        prec: 11
      default: "2000"
    - name: available
      datatype:
        type: datetime
      default: current_timestamp()
    - name: description
      datatype:
        type: text
      default: "''"
    - name: tags
      datatype:
        type: text
      default: "''"
    primary_keys:
    - name: book_id
      datatype:
        type: int
        prec: 11
      is_primary: true
      is_sequence: true
    indexes:
    - name: author_id
      fields:
      - name: author_id
        datatype:
          type: int
          prec: 11
    - name: books_title_idx
      fields:
      - name: title
        datatype:
          type: varchar
          prec: 255
        default: "''"
      - name: year
        datatype:
          type: int
          prec: 11
        default: "2000"
    - name: isbn
      fields:
      - name: isbn
        datatype:
          type: varchar
          prec: 255
        default: "''"
      is_unique: true
    - name: books_book_id_pkey
      fields:
      - name: book_id
        datatype:
          type: int
          prec: 11
        is_primary: true
        is_sequence: true
      is_unique: true
      is_primary: true
    foreign_keys:
    - name: books_ibfk_1
      column:
      - name: author_id
        datatype:
          type: int
          prec: 11
      ref_table: authors
      ref_column:
      - name: author_id
        datatype:
          type: int
          prec: 11
        is_primary: true
        is_sequence: true
